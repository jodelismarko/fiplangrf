<?xml version='1.0' encoding='UTF-8' ?>
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
	xmlns:f="http://xmlns.jcp.org/jsf/core"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:p="http://primefaces.org/ui"
	xmlns:cfw="http://ceprofw.cepromat.mt.gov.br/components">

	<p:dialog id="dlgFormCnae" modal="true" responsive="true"
		widgetVar="dlgFormCnae" draggable="false" resizable="false"
		width="1000">
		<cfw:panel idPanel="panelCnaeUnidadeAdministrativa"
			titulo="CNAE Unidade Administrativa" focus="false">

			<cfw:panelFloat showMessage="false">

				<p:messages id="idMessageFormCnaeUnidadeAdministrativa"
					style="padding:0px 10px;" />

				<cfw:fieldDecorator labelValue="Número CNAE" idComponent="codigo"
					containerWidth="Container99" responsive="false">
					<p:autoComplete id="codigo" forceSelection="true" dropdown="true"
						readonly="#{manterUnidadeAdministrativaBean.modoOperacao ne 'INCLUSAO'}"
						required="true" scrollHeight="250"
						completeMethod="#{manterUnidadeAdministrativaBean.autoCompleteCnae}"
						containerWidth="Container99" var="cnae"
						itemLabel="#{cnae.numeroCNAEFormatado} - #{cnae.descricao}"
						type="br.gov.mt.mti.fiplangrf.model.tabelas.CNAE"
						itemValue="#{cnae}" converter="entityConverter"
						value="#{manterUnidadeAdministrativaBean.cnaeUA.cnae}">
						<p:ajax event="change" process="@this" update="@([id$=descricao])" />
						<p:ajax event="itemSelect" process="@this"
							update="@([id$=descricao])" />
					</p:autoComplete>
				</cfw:fieldDecorator>

				<cfw:formInputTextArea id="descricao" labelValue="Descrição"
					containerWidth="Container99" responsive="false" rows="2"
					value="#{manterUnidadeAdministrativaBean.cnaeUA.descricaoAtividade}"
					maxlength="200" readonly="true" required="false" />

				<cfw:formInputText id="atividadeId" labelValue="Atividade"
					containerWidth="Container50"
					value="#{manterUnidadeAdministrativaBean.cnaeUA.flagTipoAtividade.desc}"
					readonly="true" required="false">
				</cfw:formInputText>

				<cfw:formSelectOneMenu id="situacaoCNAE" labelValue="Situação"
					containerWidth="Container50"
					value="#{manterUnidadeAdministrativaBean.cnaeUA.situacao}"
					itemsValue="#{combosEnumHelperBean.dominioSituacao}"
					itemLabel="#{item.desc}" itemValue="#{item}" itemVar="item"
					readonly="#{manterUnidadeAdministrativaBean.modoOperacao ne 'ALTERACAO'}"
					required="false" />

				<cfw:formCalendar labelValue="Data de Cadastro"
					containerWidth="Container50" pattern="dd/MM/yyyy HH:mm:ss"
					value="#{manterUnidadeAdministrativaBean.cnaeUA.dataCriacao}"
					rendered="#{manterUnidadeAdministrativaBean.modoOperacao ne 'INCLUSAO'}"
					readonly="true" required="true" />

				<cfw:formCalendar labelValue="Data da Última Alteração"
					containerWidth="Container50" pattern="dd/MM/yyyy HH:mm:ss"
					value="#{manterUnidadeAdministrativaBean.cnaeUA.dataAtualizacao}"
					rendered="#{manterUnidadeAdministrativaBean.modoOperacao ne 'INCLUSAO'}"
					readonly="true" />
			</cfw:panelFloat>

			<cfw:panelButtons id="buttons">
				<p:outputPanel id="molduraBotoesCNAE"
					styleClass="ui-ceprofw-panel-botoes" layout="block">

					<p:commandButton value="Concluir"
						actionListener="#{manterUnidadeAdministrativaBean.closeCnae}"
						process="@([id$=dlgFormCnae])"
						update="@([id$=panelCnaeUnidadeAdministrativa]) @([id$=tableCnae]) @([id$=idMessageFormCnaeUnidadeAdministrativa])"
						icon="fa fa-plus white Fs14" styleClass="ResponsiveButton"
						rendered="#{manterUnidadeAdministrativaBean.modoOperacao eq 'ALTERACAO'}"
						onstart="showWaitStatus()" oncomplete="hideWaitStatus()">
					</p:commandButton>

					<p:commandButton value="Concluir"
						actionListener="#{manterUnidadeAdministrativaBean.incluirCnae}"
						process="@([id$=dlgFormCnae])"
						update="@([id$=panelCnaeUnidadeAdministrativa]) @([id$=tableCnae]) @([id$=idMessageFormCnaeUnidadeAdministrativa])"
						icon="fa fa-plus white Fs14" styleClass="ResponsiveButton"
						rendered="#{manterUnidadeAdministrativaBean.modoOperacao eq 'INCLUSAO'}"
						onstart="showWaitStatus()" oncomplete="hideWaitStatus()" />
					
					<p:commandButton value="Limpar"
						actionListener="#{manterUnidadeAdministrativaBean.limparCnae}"
						process="@([id$=dlgFormCnae])"
						update="@([id$=panelCnaeUnidadeAdministrativa]) @([id$=tableCnae]) @([id$=idMessageFormCnaeUnidadeAdministrativa])"
						icon="fa fa-plus white Fs14" styleClass="ResponsiveButton"
						rendered="#{manterUnidadeAdministrativaBean.modoOperacao eq 'INCLUSAO'}"
						onstart="showWaitStatus()" oncomplete="hideWaitStatus()" />

					<p:commandButton value="Cancelar" title="Cancelar" process="@this"
						update="@([id$=dlgFormCnae])"
						actionListener="#{manterUnidadeAdministrativaBean.closeCnae}"
						icon="fa fa-close white Fs14" />

				</p:outputPanel>
			</cfw:panelButtons>
		</cfw:panel>
	</p:dialog>
</ui:composition>